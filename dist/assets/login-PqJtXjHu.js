import{u as I,a as c,R,j as e,F as o,I as h,b as _,c as A,B as E,l as k,V as n,d as v,e as F}from"./main-BxmUopUZ.js";const L=(s,d,t,i="")=>{t!=null&&t.data&&(s.setNavPath(i),s.setEmail(d||""),s.setAvatar(t.data.avatar||""),s.setToken(t.data.apiToken||""),s.setRole(t.data.role||""),s.setUserName(t.data.username||""),s.setFirstName(t.data.first_name||""),s.setLastName(t.data.last_name||""),s.setIsCompleted(t.data.has_complete_profile||!1),s.setIsVerified(t.data.is_email_verified||!1))},C=()=>{const s=I(),d=c(),[t,i]=R.useState(!1),{setEmail:N,setUserName:y,setRole:S}=c(),w=l=>{i(!0);const b={email:l.email,password:l.password};k(b).then(a=>{var m,r,u,p,g,x,f;if(a!=null&&a.error){n.error(a.message);return}if(a.status===v.SUCCESS){localStorage.clear(),F.persist.clearStorage(),c.persist.clearStorage(),n.success("Login Successful"),L(d,l.email,a);try{N(((m=a==null?void 0:a.data)==null?void 0:m.email)??l.email),y(((r=a==null?void 0:a.data)==null?void 0:r.name)??"");const j=Array.isArray((u=a==null?void 0:a.data)==null?void 0:u.role)?a.data.role:(p=a==null?void 0:a.data)!=null&&p.role?[a.data.role]:[];S(j[0]??"")}catch{}localStorage.setItem("apiToken",JSON.stringify({access:(g=a==null?void 0:a.data)==null?void 0:g.apiToken})),s("/admin/dashboard")}else n.error((f=(x=a==null?void 0:a.response)==null?void 0:x.data)==null?void 0:f.message)}).catch(a=>{n.error(a.message||"An unexpected error occurred")}).finally(()=>{i(!1)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-12 bg-red-600 d-flex justify-content-center align-items-center min-h-[100vh]",children:e.jsxs("div",{className:"row justify-content-center g-0 w-[500px]",children:[" ",e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"bg-white rounded10 p-40 w-full",children:[e.jsxs("div",{className:"content-top-agile text-center! mb-20",children:[e.jsx("img",{src:"/images/logo.png",alt:"logo",className:"w-[250px] mb-4 mx-auto"}),e.jsx("h2",{className:"text-[#1C2023] font-semibold!",children:"Welcome Back Admin"}),e.jsx("p",{className:"mb-0 text-lg",children:"Sign in to continue as admin."})]}),e.jsx("div",{children:e.jsxs(o,{layout:"vertical",onFinish:w,children:[e.jsx(o.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Invalid email format!"}],children:e.jsx(h,{placeholder:"Email"})}),e.jsx(o.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(h.Password,{placeholder:"Password",iconRender:l=>l?e.jsx(_,{}):e.jsx(A,{})})}),e.jsx(o.Item,{children:e.jsx(E,{type:"primary",htmlType:"submit",className:"w-[100%] h-[42px]!",loading:t,children:"Sign In"})})]})})]})})]})})})};export{C as default};
