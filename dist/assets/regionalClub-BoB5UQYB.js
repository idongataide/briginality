import{F as x,r as g,w as L,y as A,j as s,M as P,z as d,B as C,d as k,V as y,C as V,L as I}from"./main-BxmUopUZ.js";import{i as O,j as M,k as $}from"./useAdmin-BkrKxjQM.js";const B=({visible:c,onCancel:v,onSuccess:n})=>{var i,r;const[h]=x.useForm(),[m,p]=g.useState(!1),{data:j,isLoading:f}=L(),{data:t,isLoading:N}=A(),{data:a,isLoading:b}=O(),l=async e=>{var _,S,R,F;p(!0);try{const w={region_id:e.region_id,club_id:e.club_id,...e.president_id?{club_president_id:e.president_id}:{},...e.vice_id?{club_vice_id:e.vice_id}:{}},u=await M(w);(u==null?void 0:u.status)===k.SUCCESS?(y.success("Regional club added successfully"),h.resetFields(),n()):y.error((S=(_=u==null?void 0:u.response)==null?void 0:_.data)==null?void 0:S.message)}catch(w){y.error(((F=(R=w.response)==null?void 0:R.data)==null?void 0:F.message)||"Failed to add regional club")}finally{p(!1)}},o=()=>{h.resetFields(),v()};return s.jsx(P,{title:"Add Regional Club",open:c,onCancel:o,footer:null,width:600,children:s.jsxs(x,{form:h,layout:"vertical",onFinish:l,initialValues:{region_id:void 0,club_id:void 0,president_id:void 0,vice_id:void 0},className:"p-5",children:[s.jsx(x.Item,{label:"Region",className:"mt-5!",name:"region_id",rules:[{required:!0,message:"Please select a region"}],children:s.jsx(d,{placeholder:"Select a region",loading:f,showSearch:!0,optionFilterProp:"children",className:"h-[43px]!",children:(i=j==null?void 0:j.data)==null?void 0:i.map(e=>s.jsx(d.Option,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id))})}),s.jsx(x.Item,{label:"Club",name:"club_id",rules:[{required:!0,message:"Please select a club"}],children:s.jsx(d,{placeholder:"Select a club",loading:N,showSearch:!0,optionFilterProp:"children",className:"h-[43px]!",children:(r=t==null?void 0:t.data)==null?void 0:r.map(e=>s.jsx(d.Option,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id))})}),s.jsx(x.Item,{label:"President (Optional)",name:"president_id",children:s.jsx(d,{placeholder:"Select a president",loading:b,showSearch:!0,optionFilterProp:"children",allowClear:!0,className:"h-[43px]!",children:a==null?void 0:a.map(e=>s.jsxs(d.Option,{value:e==null?void 0:e.id,children:[e==null?void 0:e.name," - ",e==null?void 0:e.role]},e==null?void 0:e.id))})}),s.jsx(x.Item,{label:"Vice President (Optional)",name:"vice_id",children:s.jsx(d,{placeholder:"Select a vice president",loading:b,showSearch:!0,optionFilterProp:"children",allowClear:!0,className:"h-[43px]!",children:a==null?void 0:a.map(e=>s.jsxs(d.Option,{value:e==null?void 0:e.id,children:[e==null?void 0:e.name," - ",e==null?void 0:e.role]},e==null?void 0:e.id))})}),s.jsx(x.Item,{className:"mt-10! mb-0",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(C,{className:"py-5! px-10!",onClick:o,children:"Cancel"}),s.jsx(C,{type:"primary",className:"py-5! px-10! ml-3!",htmlType:"submit",loading:m,children:"Add Regional Club"})]})})]})})},z=()=>{var N,a,b;const{data:c,isLoading:v}=L(),[n,h]=g.useState(null),{data:m,isLoading:p,mutate:j}=$(n||"1"),[f,t]=g.useState(!1);return console.log(m,"clubs"),v||p?s.jsx("div",{className:"container-fluid",children:s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"box",children:s.jsx("div",{className:"box-body text-center",children:s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})})})})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"container-fluid",children:[s.jsx("div",{className:"row mb-4",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"box",children:[s.jsxs("div",{className:"box-header flex! justify-between items-center",children:[s.jsx("h4",{className:"box-title",children:"Regions Overview"}),s.jsxs(C,{className:"bg-primary text-white! font-bold",onClick:()=>t(!0),children:[s.jsx(V,{})," Add Club"]})]}),s.jsx("div",{className:"box-body",children:s.jsx("div",{className:"row",children:(N=c==null?void 0:c.data)==null?void 0:N.map((l,o)=>{const i=["bg-primary text-white","bg-info text-white","bg-success text-white"],r=i[o%i.length],e=n===(l==null?void 0:l.id);return s.jsx("div",{className:"col-xl-4 col-md-6 col-12 mb-3 ",children:s.jsxs("div",{className:`box box-body min-h-[180px] ${r} hover:shadow-lg transition-shadow duration-300 cursor-pointer ${e?"ring-4 ring-yellow-400":""}`,onClick:()=>h(l.id),children:[s.jsx("div",{className:"d-flex align-items-center justify-content-between",children:s.jsx("div",{className:"w-full lg:w-4/5",children:s.jsx("span",{className:"text-white text-2xl font-bold",children:l==null?void 0:l.name})})}),s.jsx("div",{className:"text-white text-sm opacity-90 mt-3",children:l==null?void 0:l.description}),s.jsxs("div",{className:"flex align-center mt-2 justify-end",children:[s.jsx("span",{className:"float-end bg-white px-2 text-dark fs-12 py-1 font-medium bg-opacity-20 rounded-3xl",children:"View Clubs"}),s.jsx("span",{className:"float-end bg-white px-2   fs-12 py-1 font-medium bg-opacity-20 ml-2 rounded-3xl",children:s.jsx(I,{className:"text-dark",to:`/admin/regions/${l.id}/members`,children:"View Members"})})]})]})},l==null?void 0:l.id)})})})]})})}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"box",children:[s.jsxs("div",{className:"box-header flex! items-center justify-between",children:[s.jsx("h4",{className:"box-title ",children:n?`Clubs for ${((b=(a=c==null?void 0:c.data)==null?void 0:a.find(l=>l.id===n))==null?void 0:b.name)||"Selected Region"}`:"All Clubs by Region"}),n&&s.jsx("button",{className:"btn ms-auto btn-sm text-white bg-primary",onClick:()=>h(null),children:"Show All Regions"})]}),s.jsx("div",{className:"box-body",children:s.jsx("div",{className:"row",children:m==null?void 0:m.map(l=>{var o,i,r,e;return s.jsx("div",{className:"col-xl-6 col-lg-12 col-12 mb-3",children:s.jsx("div",{className:"box mb-15 cursor-pointer",children:s.jsxs("div",{className:"box-body",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("div",{className:"me-15 bg-primary-light h-50 w-50 l-h-40 rounded text-center",children:s.jsx("span",{className:"fs-26 font-bold",children:(((o=l==null?void 0:l.club)==null?void 0:o.name)||(l==null?void 0:l.name)||"").charAt(0)})}),s.jsxs("div",{className:"d-flex flex-column fw-500",children:[s.jsx("span",{className:"text-dark mb-1 fs-16",children:((i=l==null?void 0:l.club)==null?void 0:i.name)||(l==null?void 0:l.name)}),((r=l==null?void 0:l.club)==null?void 0:r.category)&&s.jsx("span",{className:"text-[#3898CB]",children:(e=l==null?void 0:l.club)==null?void 0:e.category})]})]}),s.jsx("div",{className:"d-none d-md-block",children:s.jsx("span",{className:"badge bg-success",children:(l==null?void 0:l.open_status)||"Active"})})]}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("p",{className:"text-muted small mb-1",children:[s.jsx("b",{children:"President:"})," ",(l==null?void 0:l.club_president)||"N/A"]}),s.jsxs("p",{className:"text-muted small mb-0",children:[s.jsx("b",{children:"Vice President:"})," ",(l==null?void 0:l.club_vice)||"N/A"]})]})]})})},l.id)})})})]})})})]}),s.jsx(B,{visible:f,onCancel:()=>t(!1),onSuccess:()=>{t(!1),j()}})]})};export{z as default};
