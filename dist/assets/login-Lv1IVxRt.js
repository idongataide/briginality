import{u as R,R as _,e as r,j as e,Q as k,F as i,I as y,b as v,c as C,B as A,L as E,l as T,V as o,a as U,d as V}from"./main-qHzkskQC.js";const D=(s,d,t,n="")=>{t!=null&&t.data&&(s.setNavPath(n),s.setEmail(d||""),s.setAvatar(t.data.avatar||""),s.setToken(t.data.apiToken||""),s.setRole(t.data.role||""),s.setUserName(t.data.username||""),s.setFirstName(t.data.first_name||""),s.setLastName(t.data.last_name||""),s.setIsCompleted(t.data.has_complete_profile||!1),s.setIsVerified(t.data.is_email_verified||!1))},B=()=>{const s=R(),[d,t]=_.useState(!1),{setEmail:n,setUserName:b,setRole:S,setPresidedClubs:w}=r(),c=r(),I=l=>{t(!0);const F={email:l.email,password:l.password};T(F).then(a=>{var m,p,u,x,g,h,f,j;if(a!=null&&a.error){o.error(a.message);return}if(localStorage.clear(),r.persist.clearStorage(),U.persist.clearStorage(),c.setNavPath(""),a.status===V.SUCCESS){o.success("Login Successful"),D(c,l.email,a);try{n(((m=a==null?void 0:a.data)==null?void 0:m.email)??l.email),b(((p=a==null?void 0:a.data)==null?void 0:p.name)??"");const N=Array.isArray((u=a==null?void 0:a.data)==null?void 0:u.role)?a.data.role:(x=a==null?void 0:a.data)!=null&&x.role?[a.data.role]:[];S(N??"");const L=Array.isArray((g=a==null?void 0:a.data)==null?void 0:g.presided_clubs)?a.data.presided_clubs:[];w(L)}catch{}localStorage.setItem("apiToken",JSON.stringify({access:(h=a==null?void 0:a.data)==null?void 0:h.apiToken})),s("/leadership/dashboard")}else o.error((j=(f=a==null?void 0:a.response)==null?void 0:f.data)==null?void 0:j.message)}).catch(a=>{o.error(a.message||"An unexpected error occurred")}).finally(()=>{t(!1)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"row justify-content-center g-0",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"bg-white rounded10",children:[e.jsx("div",{className:"content-top-agile text-left! mb-20",children:e.jsxs("h2",{className:"text-[#1C2023] flex items-center",children:["  ",e.jsx(k,{onClick:()=>{s(-1)},className:"me-1 cursor-pointer"})," Login as a leader "]})}),e.jsxs("div",{className:"",children:[e.jsxs(i,{layout:"vertical",onFinish:I,children:[e.jsx(i.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Invalid email format!"}],children:e.jsx(y,{placeholder:"Email"})}),e.jsx(i.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(y.Password,{placeholder:"Password",iconRender:l=>l?e.jsx(v,{}):e.jsx(C,{})})}),e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsx("a",{className:"text-[#F9607F]",onClick:()=>s("/leadership/login/forgot-password"),children:"Forgot Password?"})}),e.jsx(i.Item,{children:e.jsx(A,{type:"primary",htmlType:"submit",className:"w-[100%] h-[42px]!",loading:d,children:"Sign In"})})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("p",{className:"mb-0 text-[#7D8489]",onClick:()=>{c.setNavPath("leadership-basic-info")},children:["Don't have an account?"," ",e.jsx(E,{to:"/leadership/signup",className:"text-[#F9607F]",children:"Sign Up"})]})})]})]})})})})};export{B as default};
