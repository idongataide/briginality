import{r as i,u as I,j as t,f as E,g as M,S as P,B as o,h as _,i as b,k as h,s as c}from"./main-gcGpcXyY.js";import{d as T,e as V,f as L}from"./useAdmin-By60mWlX.js";import{C as D,R as O}from"./RejectConfirmationModal-FyUGof7a.js";import"./ExclamationCircleOutlined-BsmmLQtr.js";const U=()=>{const{data:j,mutate:x}=T(),{approveApplication:y}=V(),{rejectApplication:v}=L(),[A,d]=i.useState(!1),[N,p]=i.useState(!1),[s,r]=i.useState(null),[u,l]=i.useState(!1),[m,R]=i.useState({current:1,pageSize:8}),w=I(),S=async()=>{if(s){l(!0);try{await y(s.id.toString()),c.success("Application approved successfully"),x(),d(!1),r(null)}catch{c.error("Failed to approve application")}finally{l(!1)}}},C=async e=>{if(s){l(!0);try{await v(s.id.toString(),e),c.success("Application rejected successfully"),x(),p(!1),r(null)}catch{c.error("Failed to reject application")}finally{l(!1)}}},F=e=>{w(`/admin/leadership/${e}`)},g=e=>{r(e),d(!0)},f=e=>{r(e),p(!0)},k=[{title:"S/N",key:"serial",render:(e,a,n)=>t.jsx("span",{className:"text-[#667085] font-[500]",children:(m.current-1)*m.pageSize+n+1})},{title:"Full Name",dataIndex:"name",key:"name",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Email",dataIndex:"email",key:"email",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Age",dataIndex:"age",key:"age",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Role",dataIndex:"role",key:"role",render:e=>{const a={"regional-president":"Regional President","regional-vice-president":"Regional Vice President","club-president":"Club President","club-vice-president":"Club Vice President","open-any":"Open to any leadership position"};return t.jsx("span",{className:"text-[#667085] font-[500]",children:a[e]||e})}},{title:"Region",dataIndex:"region_name",key:"region_name",render:e=>t.jsx("span",{className:"text-[#667085] font-[#667085] font-[500]",children:e})},{title:"Status",dataIndex:"status",key:"status",render:e=>{const a={pending:{color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200"},approved:{color:"text-green-600",bg:"bg-green-50",border:"border-green-200"},rejected:{color:"text-red-600",bg:"bg-red-50",border:"border-red-200"}},n=a[e]||a.pending,$=(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"Pending";return t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.color} ${n.bg} ${n.border}`,children:$})},filters:[{text:"Pending",value:"pending"},{text:"Approved",value:"approved"},{text:"Rejected",value:"rejected"}],onFilter:(e,a)=>a.status===e},{title:"Date Joined",dataIndex:"submitted_at",key:"submitted_at",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e}),sorter:(e,a)=>new Date(e.submitted_at).getTime()-new Date(a.submitted_at).getTime()},{title:"Actions",key:"actions",render:(e,a)=>t.jsxs(P,{children:[t.jsxs(o,{type:"primary",size:"small",onClick:()=>F(a.id),className:"border-blue-500 text-blue-500 hover:bg-blue-50",children:[t.jsx(_,{className:"mr-2"}),"Full Profile"]}),a.status==="pending"&&t.jsx(o,{type:"primary",size:"small",onClick:()=>g(a),className:"border-green-500 bg-green-600! text-white! hover:bg-green-50",icon:t.jsx(b,{}),children:"Approve"}),a.status==="pending"&&t.jsx(o,{type:"primary",size:"small",onClick:()=>f(a),className:"border-red-500  bg-red-600! text-white hover:bg-red-50",icon:t.jsx(h,{}),children:"Reject"}),a.status==="approved"&&t.jsx(o,{type:"primary",size:"small",onClick:()=>f(a),className:"border-red-500 bg-red-600! text-white hover:bg-red-50",icon:t.jsx(h,{}),children:"Reject"}),a.status==="rejected"&&t.jsx(o,{type:"primary",size:"small",onClick:()=>g(a),className:"border-green-500 bg-green-600! text-green-500 hover:bg-green-50",icon:t.jsx(b,{}),children:"Approve"})]})}],z=t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(M,{style:{fontSize:"48px",color:"#3b82f6"}}),t.jsxs("div",{className:"text-center mt-4",children:[t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Leadership yet"}),t.jsx("div",{className:"text-gray-600",children:"Your leadership will appear here once they register"})]})]});return t.jsxs("div",{className:"",children:[t.jsx("div",{className:"p-4 border bg-[#FFFFFF] rounded-lg mb-3 border-[#EAEAEA]",children:t.jsx("h3",{className:"text-md font-semibold text-[#667085]",children:"Leadership List"})}),t.jsx("div",{className:"border-[0.6px] bg-[#FFFFFF] rounded-lg mb-3 border-[#EAEAEA]",children:t.jsx(E,{columns:k,dataSource:j,locale:{emptyText:z},size:"small",className:"custom-table overflow-x-scroll text-[14px]",rowKey:"id",pagination:{...m,showSizeChanger:!1,showQuickJumper:!1,showTotal:(e,a)=>`${a[0]}-${a[1]} of ${e} items`},onChange:e=>R({current:e.current??1,pageSize:e.pageSize??8})})}),t.jsx(D,{isOpen:A,onClose:()=>{d(!1),r(null)},onConfirm:S,title:"Approve Application",message:`Are you sure you want to approve ${s==null?void 0:s.name}'s leadership application?.`,confirmText:"Approve Application",type:"approve",loading:u}),t.jsx(O,{isOpen:N,onClose:()=>{p(!1),r(null)},onConfirm:C,title:"Reject Application",message:`Are you sure you want to reject ${s==null?void 0:s.name}'s leadership application?`,confirmText:"Reject Application",loading:u})]})};export{U as default};
