import{u as I,a as d,R as F,j as e,F as n,I as f,b as R,c as k,B as v,L,l as _,V as c,d as A,e as C}from"./main-Bwk_xl5z.js";const E=(t,l,s,o="")=>{s!=null&&s.data&&(t.setNavPath(o),t.setEmail(l||""),t.setAvatar(s.data.avatar||""),t.setToken(s.data.apiToken||""),t.setRole(s.data.role||""),t.setUserName(s.data.username||""),t.setFirstName(s.data.first_name||""),t.setLastName(s.data.last_name||""),t.setIsCompleted(s.data.has_complete_profile||!1),t.setIsVerified(s.data.is_email_verified||!1))},U=()=>{const t=I(),l=d(),[s,o]=F.useState(!1),{setEmail:N,setUserName:S,setRole:y}=d(),b=i=>{o(!0);const w={email:i.email,password:i.password};_(w).then(a=>{var m,r,u,x,p,g,h;if(a!=null&&a.error){c.error(a.message);return}if(a.status===A.SUCCESS){localStorage.clear(),C.persist.clearStorage(),d.persist.clearStorage(),c.success("Login Successful"),E(l,i.email,a);try{N(((m=a==null?void 0:a.data)==null?void 0:m.email)??i.email),S(((r=a==null?void 0:a.data)==null?void 0:r.name)??"");const j=Array.isArray((u=a==null?void 0:a.data)==null?void 0:u.role)?a.data.role:(x=a==null?void 0:a.data)!=null&&x.role?[a.data.role]:[];y(j[0]??"")}catch{}localStorage.setItem("apiToken",JSON.stringify({access:(p=a==null?void 0:a.data)==null?void 0:p.apiToken})),t("/admin/dashboard")}else c.error((h=(g=a==null?void 0:a.response)==null?void 0:g.data)==null?void 0:h.msg)}).catch(a=>{c.error(a.message||"An unexpected error occurred")}).finally(()=>{o(!1)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"row justify-content-center g-0",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"bg-white rounded10",children:[e.jsxs("div",{className:"content-top-agile text-left! mb-20",children:[e.jsx("h2",{className:"text-[#1C2023]",children:"Welcome Back Admin"}),e.jsx("p",{className:"mb-0 text-lg",children:"Sign in to continue as admin."})]}),e.jsxs("div",{className:"",children:[e.jsxs(n,{layout:"vertical",onFinish:b,children:[e.jsx(n.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Invalid email format!"}],children:e.jsx(f,{placeholder:"Email"})}),e.jsx(n.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(f.Password,{placeholder:"Password",iconRender:i=>i?e.jsx(R,{}):e.jsx(k,{})})}),e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsx("a",{className:"text-[#F9607F]",onClick:()=>t("/login/forgot-password"),children:"Forgot Password?"})}),e.jsx(n.Item,{children:e.jsx(v,{type:"primary",htmlType:"submit",className:"w-[100%] h-[42px]!",loading:s,children:"Sign In"})})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("p",{className:"mb-0 text-[#7D8489]",onClick:()=>{l.setNavPath("basic-info")},children:["Don't have an account?"," ",e.jsx(L,{to:"/signup",className:"text-[#F9607F]",children:"Sign Up"})]})})]})]})})})})})};export{U as default};
