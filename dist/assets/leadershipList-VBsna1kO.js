import{r as o,j as t,f as S,g as k,S as $,B as n,h as I,i as b,k as f,s as l}from"./main-ghorEWNf.js";import{d as z,e as E,f as M}from"./useAdmin-CitRd2oZ.js";import{C as T,R as P}from"./RejectConfirmationModal-DLWnxWVd.js";import"./ExclamationCircleOutlined-BGeTqaiG.js";const O=()=>{const{data:h,mutate:m}=z(),{approveApplication:j}=E(),{rejectApplication:y}=M(),[v,c]=o.useState(!1),[A,d]=o.useState(!1),[a,r]=o.useState(null),[x,i]=o.useState(!1),N=async()=>{if(a){i(!0);try{await j(a.id.toString()),l.success("Application approved successfully"),m(),c(!1),r(null)}catch{l.error("Failed to approve application")}finally{i(!1)}}},R=async e=>{if(a){i(!0);try{await y(a.id.toString(),e),l.success("Application rejected successfully"),m(),d(!1),r(null)}catch{l.error("Failed to reject application")}finally{i(!1)}}},u=e=>{r(e),c(!0)},g=e=>{r(e),d(!0)},w=[{title:"S/N",dataIndex:"id",key:"id",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Full Name",dataIndex:"name",key:"name",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Role",dataIndex:"role",key:"role",render:e=>{const s={"regional-president":"Regional President","regional-vice-president":"Regional Vice President","club-president":"Club President","club-vice-president":"Club Vice President","open-any":"Open to any leadership position"};return t.jsx("span",{className:"text-[#667085] font-[500]",children:s[e]||e})}},{title:"Region",dataIndex:"region_name",key:"region_name",render:e=>t.jsx("span",{className:"text-[#667085] font-[#667085] font-[500]",children:e})},{title:"Status",dataIndex:"status",key:"status",render:e=>{const s={pending:{color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200"},approved:{color:"text-green-600",bg:"bg-green-50",border:"border-green-200"},rejected:{color:"text-red-600",bg:"bg-red-50",border:"border-red-200"}},p=s[e]||s.pending,C=(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"Pending";return t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.color} ${p.bg} ${p.border}`,children:C})},filters:[{text:"Pending",value:"pending"},{text:"Approved",value:"approved"},{text:"Rejected",value:"rejected"}],onFilter:(e,s)=>s.status===e},{title:"Date Joined",dataIndex:"submitted_at",key:"submitted_at",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e}),sorter:(e,s)=>new Date(e.submitted_at).getTime()-new Date(s.submitted_at).getTime()},{title:"Actions",key:"actions",render:(e,s)=>t.jsxs($,{children:[t.jsxs(n,{type:"primary",size:"small",onClick:()=>window.open(`/admin/leadership/${s.id}`),className:"border-blue-500 text-blue-500 hover:bg-blue-50",children:[t.jsx(I,{className:"mr-2"}),"Full Profile"]}),s.status==="pending"&&t.jsx(n,{type:"primary",size:"small",onClick:()=>u(s),className:"border-green-500 bg-green-600! text-white! hover:bg-green-50",icon:t.jsx(b,{}),children:"Approve"}),s.status==="pending"&&t.jsx(n,{type:"primary",size:"small",onClick:()=>g(s),className:"border-red-500  bg-red-600! text-white hover:bg-red-50",icon:t.jsx(f,{}),children:"Reject"}),s.status==="approved"&&t.jsx(n,{type:"primary",size:"small",onClick:()=>g(s),className:"border-red-500 bg-red-600! text-white hover:bg-red-50",icon:t.jsx(f,{}),children:"Reject"}),s.status==="rejected"&&t.jsx(n,{type:"primary",size:"small",onClick:()=>u(s),className:"border-green-500 bg-green-600! text-green-500 hover:bg-green-50",icon:t.jsx(b,{}),children:"Approve"})]})}],F=t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(k,{style:{fontSize:"48px",color:"#3b82f6"}}),t.jsxs("div",{className:"text-center mt-4",children:[t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Leadership yet"}),t.jsx("div",{className:"text-gray-600",children:"Your leadership will appear here once they register"})]})]});return t.jsxs("div",{className:"",children:[t.jsx("div",{className:"p-4 border bg-[#FFFFFF] rounded-lg mb-3 border-[#EAEAEA]",children:t.jsx("h3",{className:"text-md font-semibold text-[#667085]",children:"Leadership List"})}),t.jsx("div",{className:"border-[0.6px] bg-[#FFFFFF] rounded-lg mb-3 border-[#EAEAEA]",children:t.jsx(S,{columns:w,dataSource:h,locale:{emptyText:F},size:"small",className:"custom-table text-[14px]",pagination:{pageSize:8,showSizeChanger:!1,showQuickJumper:!1,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} items`}})}),t.jsx(T,{isOpen:v,onClose:()=>{c(!1),r(null)},onConfirm:N,title:"Approve Application",message:`Are you sure you want to approve ${a==null?void 0:a.name}'s leadership application?.`,confirmText:"Approve Application",type:"approve",loading:x}),t.jsx(P,{isOpen:A,onClose:()=>{d(!1),r(null)},onConfirm:R,title:"Reject Application",message:`Are you sure you want to reject ${a==null?void 0:a.name}'s leadership application?`,confirmText:"Reject Application",loading:x})]})};export{O as default};
