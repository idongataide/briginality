import{r as d,ao as R,ad as I,ap as T,e as C,ak as z,ah as i,F as c,j as e,B as g,T as O,an as f,aq as L,M as A,z as B,I as v,ar as H,V as y}from"./main-BxmUopUZ.js";var q=function(a,l){var n={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&l.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(a);r<s.length;r++)l.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(a,s[r])&&(n[s[r]]=a[s[r]]);return n};const{TimePicker:V,RangePicker:U}=I,W=d.forwardRef((a,l)=>d.createElement(U,Object.assign({},a,{picker:"time",mode:void 0,ref:l}))),u=d.forwardRef((a,l)=>{var{addon:n,renderExtraFooter:s,variant:r,bordered:p}=a,b=q(a,["addon","renderExtraFooter","variant","bordered"]);const[j]=R("timePicker",r,p),m=d.useMemo(()=>{if(s)return s;if(n)return n},[n,s]);return d.createElement(V,Object.assign({},b,{mode:void 0,ref:l,renderExtraFooter:m,variant:j}))}),_=T(u,"popupAlign",void 0,"picker");u._InternalPanelDoNotUseOrYouWillBeFired=_;u.RangePicker=W;u._InternalPanelDoNotUseOrYouWillBeFired=_;const{TabPane:Y}=O,K=()=>{const{presidedClubs:a}=C(),{data:l,isLoading:n,mutate:s}=z(),r=i().format("YYYY-MM-DD"),[p,b]=d.useState("upcoming"),[j,m]=d.useState(!1),[D,N]=d.useState(!1),[h]=c.useForm(),E=d.useMemo(()=>(a||[]).map(t=>({label:t.name,value:t.id})),[a]),S=(l||[]).filter(t=>i(t.date).isAfter(i(r))||i(t.date).isSame(i(r))),F=(l||[]).filter(t=>i(t.date).isBefore(i(r)));return e.jsxs("div",{className:"col-xl-12 col-12",children:[e.jsxs("div",{className:"box",children:[e.jsxs("div",{className:"box-header with-border",children:[e.jsx("h4",{className:"box-title",children:"Club Events"}),e.jsx("div",{className:"box-controls pull-right",children:e.jsx(g,{type:"primary",size:"middle",onClick:()=>m(!0),children:"Add Event"})})]}),e.jsx("div",{className:"box-body",children:e.jsxs(O,{activeKey:p,onChange:t=>b(t),className:"mb-20",children:[e.jsx(Y,{tab:"Upcoming Events",children:e.jsx(f,{loading:n,dataSource:S,renderItem:t=>e.jsx(f.Item,{children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between w-full flex-wrap md:flex-nowrap gap-2 md:gap-0",style:{flexDirection:"row"},children:["                      ",e.jsx("div",{className:"flex mb-2",children:e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold! mb-1",children:t.title}),e.jsx("p",{className:"mb-1",children:t.club}),e.jsx("p",{className:"text-md",children:t.description})]})}),e.jsx("div",{className:"flex-1 min-w-0 flex md:block flex-col md:flex-row justify-between items-left mb-2 md:mb-0",children:e.jsxs("p",{className:"text-md",children:[i(t.date).format("MMMM D, YYYY")," • ",t.time]})}),e.jsx("div",{className:"flex flex-col items-end w-full md:w-auto",children:e.jsxs(g,{type:"primary",size:"small",onClick:()=>window.open(t.meetingLink,"_blank"),children:[e.jsx(L,{className:"mr-1"}),"Join Meeting"]})})]})})})},"upcoming"),e.jsx(Y,{tab:"Past Events",children:e.jsx(f,{loading:n,dataSource:F,renderItem:t=>e.jsx(f.Item,{children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between w-full",children:[e.jsx("div",{className:"flex mb-2",children:e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold! mb-1",children:t.title}),e.jsx("p",{className:"mb-1",children:t.club}),e.jsx("p",{className:"text-md",children:t.description})]})}),e.jsx("div",{className:"flex justify-between items-left",children:e.jsxs("p",{className:"text-md",children:[i(t.date).format("MMMM D, YYYY")," • ",t.time]})}),e.jsx("div",{className:"flex flex-column",children:e.jsx(g,{type:"default",size:"small",disabled:!0,children:"Event Ended"})})]})})})},"past")]})})]}),e.jsx(A,{title:"Add New Event",open:j,onCancel:()=>m(!1),onOk:()=>h.submit(),okText:"Create Event",confirmLoading:D,children:e.jsxs(c,{layout:"vertical",form:h,onFinish:async t=>{var w,k,M,P;try{N(!0);const x={name:t.name,assigned_club_id:t.assigned_club_id,start_date:t.date.format("YYYY-MM-DD"),end_date:t.date.format("YYYY-MM-DD"),start_time:(k=(w=t.time)==null?void 0:w[0])==null?void 0:k.format("HH:mm"),end_time:(P=(M=t.time)==null?void 0:M[1])==null?void 0:P.format("HH:mm"),description:t.description,zoom_link:t.zoom_link},o=await H(x);if(o!=null&&o.error){y.error((o==null?void 0:o.message)||"Failed to create event");return}y.success("Event created"),m(!1),h.resetFields(),s()}catch(x){y.error((x==null?void 0:x.message)||"Failed to create event")}finally{N(!1)}},children:[e.jsx(c.Item,{name:"assigned_club_id",label:"Club",rules:[{required:!0,message:"Select a club"}],children:e.jsx(B,{className:"h-[43px]!",options:E,placeholder:E.length?"Select club":"No presided clubs found"})}),e.jsx(c.Item,{name:"name",label:"Event Name",rules:[{required:!0,message:"Enter event name"}],children:e.jsx(v,{placeholder:"Emergency Club Board Meeting"})}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx(c.Item,{name:"date",label:"Date",rules:[{required:!0,message:"Select date"}],style:{flex:1},children:e.jsx(I,{className:"w-full h-[43px]!"})}),e.jsx(c.Item,{name:"time",label:"Time Range",rules:[{required:!0,message:"Select start and end time"}],style:{flex:1},children:e.jsx(u.RangePicker,{className:"w-full h-[43px]!",format:"HH:mm"})})]}),e.jsx(c.Item,{name:"zoom_link",label:"Meeting Link",rules:[{type:"url",message:"Enter a valid URL"}],children:e.jsx(v,{placeholder:"https://zoom.us/j/7778889990"})}),e.jsx(c.Item,{name:"description",label:"Description",children:e.jsx(v.TextArea,{rows:6,placeholder:"Event description and agenda"})})]})})]})};export{K as default};
