import{ao as Z,r as a,ap as L,aq as M,ar as ee,as as te,at as R,B as O,au as ne,av as se,aw as oe,ax as V,ay as ae,az as le,aA as ie,aB as ce,q as re,_ as de,a6 as ue,a as me,e as pe,a7 as fe,F as S,j as t,am as xe,an as he,E as ge,H as ye,aC as Ce,aD as ve,f as be,M as je,I as A,x as H,S as B,J as Ne,aE as F,h as Oe,aF as Pe,aG as Se,s as E}from"./main-ghorEWNf.js";import{R as we}from"./ExclamationCircleOutlined-BGeTqaiG.js";const Ee=e=>{const{componentCls:o,iconCls:l,antCls:n,zIndexPopup:i,colorText:x,colorWarning:C,marginXXS:m,marginXS:p,fontSize:v,fontWeightStrong:h,colorTextHeading:d}=e;return{[o]:{zIndex:i,[`&${n}-popover`]:{fontSize:v},[`${o}-message`]:{marginBottom:p,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${o}-message-icon ${l}`]:{color:C,fontSize:v,lineHeight:1,marginInlineEnd:p},[`${o}-title`]:{fontWeight:h,color:d,"&:only-child":{fontWeight:"normal"}},[`${o}-description`]:{marginTop:m,color:x}},[`${o}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:p}}}}},Ie=e=>{const{zIndexPopupBase:o}=e;return{zIndexPopup:o+60}},W=Z("Popconfirm",e=>Ee(e),Ie,{resetStyle:!1});var Te=function(e,o){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)o.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]]);return l};const q=e=>{const{prefixCls:o,okButtonProps:l,cancelButtonProps:n,title:i,description:x,cancelText:C,okText:m,okType:p="primary",icon:v=a.createElement(L,null),showCancel:h=!0,close:d,onConfirm:b,onCancel:j,onPopupClick:g}=e,{getPrefixCls:r}=a.useContext(M),[y]=ee("Popconfirm",te.Popconfirm),N=R(i),P=R(x);return a.createElement("div",{className:`${o}-inner-content`,onClick:g},a.createElement("div",{className:`${o}-message`},v&&a.createElement("span",{className:`${o}-message-icon`},v),a.createElement("div",{className:`${o}-message-text`},N&&a.createElement("div",{className:`${o}-title`},N),P&&a.createElement("div",{className:`${o}-description`},P))),a.createElement("div",{className:`${o}-buttons`},h&&a.createElement(O,Object.assign({onClick:j,size:"small"},n),C||(y==null?void 0:y.cancelText)),a.createElement(ne,{buttonProps:Object.assign(Object.assign({size:"small"},se(p)),l),actionFn:b,close:d,prefixCls:r("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},m||(y==null?void 0:y.okText))))},$e=e=>{const{prefixCls:o,placement:l,className:n,style:i}=e,x=Te(e,["prefixCls","placement","className","style"]),{getPrefixCls:C}=a.useContext(M),m=C("popconfirm",o),[p]=W(m);return p(a.createElement(oe,{placement:l,className:V(m,n),style:i,content:a.createElement(q,Object.assign({prefixCls:m},x))}))};var ke=function(e,o){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)o.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]]);return l};const _e=a.forwardRef((e,o)=>{var l,n;const{prefixCls:i,placement:x="top",trigger:C="click",okType:m="primary",icon:p=a.createElement(L,null),children:v,overlayClassName:h,onOpenChange:d,onVisibleChange:b,overlayStyle:j,styles:g,classNames:r}=e,y=ke(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:N,className:P,style:$,classNames:w,styles:I}=ae("popconfirm"),[k,T]=le(!1,{value:(l=e.open)!==null&&l!==void 0?l:e.visible,defaultValue:(n=e.defaultOpen)!==null&&n!==void 0?n:e.defaultVisible}),s=(u,f)=>{T(u,!0),b==null||b(u),d==null||d(u,f)},c=u=>{s(!1,u)},_=u=>{var f;return(f=e.onConfirm)===null||f===void 0?void 0:f.call(void 0,u)},X=u=>{var f;s(!1,u),(f=e.onCancel)===null||f===void 0||f.call(void 0,u)},J=(u,f)=>{const{disabled:Q=!1}=e;Q||s(u,f)},z=N("popconfirm",i),Y=V(z,P,h,w.root,r==null?void 0:r.root),G=V(w.body,r==null?void 0:r.body),[K]=W(z);return K(a.createElement(ie,Object.assign({},ce(y,["title"]),{trigger:C,placement:x,onOpenChange:J,open:k,ref:o,classNames:{root:Y,body:G},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},I.root),$),j),g==null?void 0:g.root),body:Object.assign(Object.assign({},I.body),g==null?void 0:g.body)},content:a.createElement(q,Object.assign({okType:m,icon:p},e,{prefixCls:z,close:c,onConfirm:_,onCancel:X})),"data-popover-inject":!0}),v))}),U=_e;U._InternalPanelDoNotUseOrYouWillBeFired=$e;var ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Fe=function(o,l){return a.createElement(re,de({},o,{ref:l,icon:ze}))},Ve=a.forwardRef(Fe);const{Title:Re,Text:D}=ye,{TextArea:Be}=A,{Option:De}=H,Ae=()=>{var T;const{pathname:e}=ue(),{setNavPath:o}=me(),{presidedClubs:l}=pe(),{data:n,isLoading:i,mutate:x}=fe(),{createNotice:C,updateNotice:m,deleteNotice:p}=Se(),[v,h]=a.useState(!1),[d,b]=a.useState(null),[j]=S.useForm(),[g,r]=a.useState(!1);a.useEffect(()=>{o(e.replace("/notices","dashboard"))},[e,o]);const y=()=>{b(null),j.resetFields(),h(!0)},N=s=>{b(s),j.setFieldsValue({title:s.title,content:s.content,club_id:s.club_id}),h(!0)},P=async s=>{try{r(!0),await p(s),E.success("Notice deleted successfully"),x()}catch(c){E.error(c.message||"Failed to delete notice")}finally{r(!1)}},$=async s=>{try{if(r(!0),d){const c={...s,_method:"PUT"};await m(d.id,c),E.success("Notice updated successfully")}else{const c={title:s.title,content:s.content,club_id:s.club_id};await C(c),E.success("Notice created successfully")}h(!1),j.resetFields(),x()}catch(c){E.error(c.message||"Failed to save notice")}finally{r(!1)}},w=()=>{h(!1),j.resetFields(),b(null)},I=s=>{const c=l.find(_=>_.id===s);return(c==null?void 0:c.name)||`Club ${s}`},k=[{title:"Title",dataIndex:"title",key:"title",render:s=>t.jsx(D,{strong:!0,style:{maxWidth:200},ellipsis:{tooltip:s},children:s})},{title:"Content",dataIndex:"content",key:"content",render:s=>t.jsx(D,{style:{maxWidth:300},ellipsis:{tooltip:s},children:s})},{title:"Club",dataIndex:"club_id",key:"club_id",render:s=>t.jsx(Ne,{color:"blue",children:I(s)})},{title:"Actions",key:"actions",render:(s,c)=>t.jsxs(B,{size:"small",children:[t.jsx(F,{title:"View Details",children:t.jsx(O,{type:"text",icon:t.jsx(Oe,{}),onClick:()=>N(c)})}),t.jsx(F,{title:"Edit Notice",children:t.jsx(O,{type:"text",icon:t.jsx(Pe,{}),onClick:()=>N(c)})}),t.jsx(F,{title:"Delete Notice",children:t.jsx(U,{title:"Delete Notice",description:"Are you sure you want to delete this notice? This action cannot be undone.",onConfirm:()=>P(c.id),okText:"Yes",cancelText:"No",icon:t.jsx(we,{style:{color:"red"}}),children:t.jsx(O,{type:"text",danger:!0,icon:t.jsx(Ve,{})})})})]})}];return t.jsxs("div",{className:"container-full",children:[t.jsx(xe,{gutter:[16,16],children:t.jsx(he,{span:24,children:t.jsxs(ge,{children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[t.jsx(Re,{level:3,style:{margin:0},children:"Notices Management"}),t.jsx(O,{type:"primary",icon:t.jsx(Ce,{}),onClick:y,size:"large",children:"Create Notice"})]}),t.jsx(ve,{}),t.jsx(be,{columns:k,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,c)=>`${c[0]}-${c[1]} of ${s} notices`},scroll:{x:1200}})]})})}),t.jsx(je,{title:d?"Edit Notice":"Create New Notice",open:v,onCancel:w,footer:null,width:800,destroyOnClose:!0,children:t.jsxs(S,{form:j,layout:"vertical",onFinish:$,initialValues:{id:((T=l[0])==null?void 0:T.id)||void 0},children:[t.jsx(S.Item,{name:"title",label:"Notice Title",rules:[{required:!0,message:"Please enter a title for the notice"},{min:3,message:"Title must be at least 3 characters long"}],children:t.jsx(A,{placeholder:"Enter notice title",maxLength:100,showCount:!0})}),t.jsx(S.Item,{name:"club_id",label:"Select Club",rules:[{required:!0,message:"Please select a club"}],children:t.jsx(H,{className:"h-[43px]!",placeholder:"Select a club",children:l.map(s=>t.jsx(De,{value:s.id,children:s.name},s.id))})}),t.jsx(S.Item,{name:"content",label:"Notice Content",rules:[{required:!0,message:"Please enter the notice content"},{min:10,message:"Content must be at least 10 characters long"}],children:t.jsx(Be,{placeholder:"Enter notice content...",rows:8,maxLength:2e3,showCount:!0,style:{resize:"vertical"}})}),t.jsx(S.Item,{className:"mt-[40px]!",style:{marginBottom:0,textAlign:"right"},children:t.jsxs(B,{children:[t.jsx(O,{className:"h-[43px]!",onClick:w,children:"Cancel"}),t.jsx(O,{type:"primary",htmlType:"submit",className:"h-[43px]!",loading:g,children:d?"Update Notice":"Create Notice"})]})})]})})]})};export{Ae as default};
