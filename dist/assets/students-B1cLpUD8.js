import{u as E,r as o,j as t,f as I,g as M,S as _,B as l,h as T,i as f,k as j,s as c}from"./main-DWRuNCmW.js";import{u as P,a as V,b as B}from"./useAdmin-DoodYWLm.js";import{C as D,R as J}from"./RejectConfirmationModal-Zte_IIPJ.js";import"./ExclamationCircleOutlined-DFf6nuDa.js";const U=()=>{const h=E(),{data:y,mutate:u}=P(),{approveApplication:v}=V(),{rejectApplication:A}=B(),[N,d]=o.useState(!1),[S,p]=o.useState(!1),[a,r]=o.useState(null),[x,i]=o.useState(!1),[m,w]=o.useState({current:1,pageSize:8}),C=async()=>{if(a){i(!0);try{await v(a.id.toString()),c.success("Application approved successfully"),u(),d(!1),r(null)}catch{c.error("Failed to approve application")}finally{i(!1)}}},F=async e=>{if(a){i(!0);try{await A(a.id.toString(),e),c.success("Application rejected successfully"),u(),p(!1),r(null)}catch{c.error("Failed to reject application")}finally{i(!1)}}},g=e=>{r(e),d(!0)},b=e=>{r(e),p(!0)},R=e=>{h(`/admin/students/${e}`)},k=[{title:"S/N",key:"serial",render:(e,s,n)=>t.jsx("span",{className:"text-[#667085] font-[500]",children:(m.current-1)*m.pageSize+n+1})},{title:"Full Name",dataIndex:"name",key:"name",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Email",dataIndex:"email",key:"email",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Age",dataIndex:"age",key:"age",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Region",dataIndex:"region_name",key:"region_name",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Status",dataIndex:"status",key:"status",render:e=>{const s={pending:{color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200"},approved:{color:"text-green-600",bg:"bg-green-50",border:"border-green-200"},rejected:{color:"text-red-600",bg:"bg-red-50",border:"border-red-200"}},n=s[e]||s.pending,$=(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"Pending";return t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.color} ${n.bg} ${n.border}`,children:$})},filters:[{text:"Pending",value:"pending"},{text:"Approved",value:"approved"},{text:"Rejected",value:"rejected"}],onFilter:(e,s)=>s.status===e},{title:"Date Joined",dataIndex:"submitted_at",key:"submitted_at",render:e=>t.jsx("span",{className:"text-[#667085] font-[500]",children:e})},{title:"Actions",key:"actions",render:(e,s)=>t.jsxs(_,{children:[t.jsxs(l,{type:"primary",size:"small",onClick:()=>R(s.id),className:"border-blue-500 text-blue-500 hover:bg-blue-50",children:[t.jsx(T,{className:"mr-2"}),"Full Profile"]}),s.status==="pending"&&t.jsx(l,{type:"primary",size:"small",onClick:()=>g(s),className:"border-green-500 bg-green-600! text-white! hover:bg-green-50",icon:t.jsx(f,{}),children:"Approve"}),s.status==="pending"&&t.jsx(l,{type:"primary",size:"small",onClick:()=>b(s),className:"border-red-500 bg-red-600! text-white hover:bg-red-50",icon:t.jsx(j,{}),children:"Reject"}),s.status==="approved"&&t.jsx(l,{type:"primary",size:"small",onClick:()=>b(s),className:"border-red-500 bg-red-600! text-white hover:bg-red-50",icon:t.jsx(j,{}),children:"Reject"}),s.status==="rejected"&&t.jsx(l,{type:"primary",size:"small",onClick:()=>g(s),className:"border-green-500 bg-green-600! text-white! hover:bg-green-50",icon:t.jsx(f,{}),children:"Approve"})]})}],z=t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(M,{style:{fontSize:"48px",color:"#3b82f6"}}),t.jsxs("div",{className:"text-center mt-4",children:[t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students yet"}),t.jsx("div",{className:"text-gray-600",children:"Your students will appear here once they register"})]})]});return t.jsxs("div",{className:"",children:[t.jsx("div",{className:"p-4 border bg-[#FFFFFF] rounded-lg mb-3 border-[#EAEAEA]",children:t.jsx("h3",{className:"text-md font-semibold text-[#667085]",children:"Student List"})}),t.jsx("div",{className:"border-[0.6px] bg-[#FFFFFF] rounded-lg mb-3 border-[#EAEAEA]",children:t.jsx(I,{columns:k,dataSource:y,locale:{emptyText:z},size:"small",className:"custom-table overflow-x-scroll text-[14px]",rowKey:"id",pagination:{...m,showSizeChanger:!1,showQuickJumper:!1,showTotal:(e,s)=>`${s[0]}-${s[1]} of ${e} items`},onChange:e=>w({current:e.current??1,pageSize:e.pageSize??8})})}),t.jsx(D,{isOpen:N,onClose:()=>{d(!1),r(null)},onConfirm:C,title:"Approve Application",message:`Are you sure you want to approve ${a==null?void 0:a.name}'s club application?`,confirmText:"Approve Application",type:"approve",loading:x}),t.jsx(J,{isOpen:S,onClose:()=>{p(!1),r(null)},onConfirm:F,title:"Reject Application",message:`Are you sure you want to reject ${a==null?void 0:a.name}'s club application?`,confirmText:"Reject Application",loading:x})]})};export{U as default};
