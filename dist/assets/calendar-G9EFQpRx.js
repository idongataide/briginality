import{r as x,w as C,G as R,as as w,R as B,j as e,o as m,T as h,am as L,O as k,H as D,N as S,X as E,Y,B as I,at as M}from"./main-DWRuNCmW.js";const{TabPane:T}=h,F=()=>{var r;const[j,g]=x.useState(new Date),[n,c]=x.useState(""),{data:i,isLoading:u}=C(),{profile:d}=R(),{data:t,isLoading:N}=w(n);console.log(j),B.useEffect(()=>{var s;i&&i.length>0&&!n&&c(((s=i[0].id)==null?void 0:s.toString())||"")},[i,n]);const p=s=>{if(!(i!=null&&i.data)||!s)return null;const a=i.data.find(l=>l.name===s);return a?a.id:null},b=s=>{if(!t)return[];const a=s.format("YYYY-MM-DD");return t.filter(l=>l.start_date===a)},v=s=>{const a=b(s);return e.jsx("ul",{className:"events",children:a.map(l=>e.jsx("li",{children:e.jsx(k,{status:"processing",color:"#3898CB",text:e.jsx("div",{className:"text-xs truncate max-w-[80px]",children:l.title})})},l.id))})},f=s=>{var o;const a=p(s.region),l=(o=d==null?void 0:d.user_details)==null?void 0:o.region_id,y=a&&l&&a==l;return console.log(a,l,"eventRegionIds"),e.jsx(D,{className:"mb-4",style:{borderLeft:"4px solid #3898CB"},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-semibold mb-0",children:s.title}),e.jsx(S,{color:"#3898CB",children:s.club.length>10?s.club.slice(0,15)+"...":s.club})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{}),e.jsx("span",{children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{}),e.jsx("span",{children:s.club})]})]})]}),y&&s.meetingLink&&e.jsx(I,{type:"primary",icon:e.jsx(M,{}),onClick:()=>window.open(s.meetingLink,"_blank"),children:"Join"})]})},s.id)};return u?e.jsx("div",{className:"container-full",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12",children:e.jsx("div",{className:"box",children:e.jsxs("div",{className:"box-body text-center p-8",children:[e.jsx(m,{size:"large"}),e.jsx("p",{className:"mt-4",children:"Loading regions..."})]})})})})}):e.jsx("div",{className:"container-full",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12",children:e.jsxs("div",{className:"box",children:[e.jsx("div",{className:"box-header with-border",children:e.jsx("h4",{className:"box-title",children:"Regional Calendar"})}),e.jsx("div",{className:"box-body",children:e.jsx(h,{activeKey:n,onChange:s=>c(s),className:"mb-4",children:(r=i==null?void 0:i.data)==null?void 0:r.map(s=>{var a;return e.jsxs(T,{tab:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#3898CB"}}),e.jsx("span",{children:s.name})]}),children:[e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h5",{className:"font-semibold mb-2",children:["Region: ",s.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click on a date to view events"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-3",children:"Calendar View"}),e.jsx(L,{fullscreen:!1,dateCellRender:v,onSelect:l=>g(l.toDate()),style:{border:"1px solid #d9d9d9",borderRadius:"6px",padding:"8px"}})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-3",children:"Events"}),N?e.jsxs("div",{className:"text-center p-8",children:[e.jsx(m,{}),e.jsx("p",{className:"mt-4",children:"Loading events..."})]}):t&&t.length>0?e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.map(f)}):e.jsx("div",{className:"text-center p-8 text-gray-500",children:e.jsx("p",{children:"No events found for this region"})})]})]})]},((a=s.id)==null?void 0:a.toString())||"")})})})]})})})})};export{F as default};
